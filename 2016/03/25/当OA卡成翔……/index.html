<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>当OA卡成翔…… | April's way</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">当OA卡成翔……</h1><a id="logo" href="/.">April's way</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">当OA卡成翔……</h1><div class="post-meta">Mar 25, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/03/25/当OA卡成翔……/" href="/2016/03/25/当OA卡成翔……/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>由于公司业务需要，原本在局域网中的OA系统需要迁移到云端，于是就购买了一台云服务器。使用lnmp一键安装包搭建测试环境。</p>
<h2 id="环境搭建好后，就开始测试了……"><a href="#环境搭建好后，就开始测试了……" class="headerlink" title="环境搭建好后，就开始测试了……"></a>环境搭建好后，就开始测试了……</h2><p>经过测试，一切正常，于是下班后，就留下来，开始正式在云端部署OA。公司的网络真是太卡了，上传文件，都上传了几个小时，还好提前有些文件是已经上传好的！忙到晚上1点左右，终于处理完毕。找了下当时值班的同事，测试了下，还行，操作上速度挺快的，只是在登录系统的时候，非常慢，登录以后还不错。于是，就轻轻松松的打车回去了。</p>
<p>第二天，到公司，结果，OA非常卡，很多人都卡在了登录界面，很多人的打开OA后，浏览器直接显示无法打开，连登录界面都没机会看到，根本无法使用。由于服务器选的是2MB的宽带，本地装了3条拨号宽带，加起来有20+MB。怀疑是服务器带宽不够用，于是就去增加服务器的带宽。但是，情况并没有什么改观，只好再次换回本地的系统。<br>换回本地系统后，就开始去自查原因，想看看，究竟哪里的问题。经过一段时间的分析，发现登录时候卡，是由于登录后，马上就要去调用统计的功能，去数据库查询客服的销量，电话数量，服务数量，未接电话数量等，而且是每个人登录，OA都会发出这样的请求，结果上千的请求几乎在同一时间发出，但是又一直收不到回复数据，这些数据也没有做缓存，最终局域网最先被拖垮，无论是OA还是其它网站，都无法打开。这样反而保护了服务器，服务器一直处于悠闲状态。这时候开始，将这部分统计的代码全部删除了，发现登录的速度快了起来，心想着问题终于解决了，就再一次把数据部署到了服务器上。</p>
<p>第三天，同样的问题再次发生，虽然情况没有第二天严重，但是OA依然很卡，部分人也还是连登录界面都打不开。自己的Mac mini所在的局域网也因此非常慢，一直处于满负荷的状态，上不了网。于是，就把手机热点打开，Mac mini直接连手机。使用手机网络后，继续登录OA，意外发现，OA并没有在公司局域网中访问那么慢，就想到，这次的卡，可能跟公司网络有关。立即联系了行政，申请将原有的12MB电信宽带升级到100MB。</p>
<p>宽带升级后，经过10000.gd.cn上测试，下载达到30+MB，局域网内网速也非常快。此时，再去登录OA，基本和本地访问的效果是一样的。同时，部门连登录界面都访问不了的同事，也很顺畅的登录了系统。</p>
<p>总结一下：<br>    1.影响网站速度的，不仅仅有服务器的软硬件环境，同时还有用户自身网络及硬件环境等因素；<br>    2.需要登录才能访问的OA等系统，一定不要在登录后的页面，调用大量数据，同时还不做任何缓存处理。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/03/25/当OA卡成翔……/" data-id="ciqmh63wb000e0ru7q2qkiego" class="article-share-link">Aktie</a><div class="tags"><a href="/tags/服务器-本地-云-卡/">服务器 本地 云 卡</a></div><div class="post-nav"><a href="/2016/04/08/ERROR-Deployer-not-found-git/" class="pre">ERROR Deployer not found: git</a><a href="/2016/03/25/写了个计算代码执行时间的函数/" class="next">写了个计算代码执行时间的函数</a></div><div id="disqus_thread"><script>var disqus_shortname = 'oknixus';
var disqus_identifier = '2016/03/25/当OA卡成翔……/';
var disqus_title = '当OA卡成翔……';
var disqus_url = 'http://yoursite.com/2016/03/25/当OA卡成翔……/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//oknixus.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/AI-人工智能/" style="font-size: 15px;">AI 人工智能</a> <a href="/tags/hexo-d/" style="font-size: 15px;">hexo d</a> <a href="/tags/读书方法-读书经验/" style="font-size: 15px;">读书方法 读书经验</a> <a href="/tags/犯困-上班-上班犯困/" style="font-size: 15px;">犯困 上班 上班犯困</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/服务器-本地-云-卡/" style="font-size: 15px;">服务器 本地 云 卡</a> <a href="/tags/服务器/" style="font-size: 15px;">服务器</a> <a href="/tags/php-mkdir/" style="font-size: 15px;">php mkdir</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/关于读书/">关于读书</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/硬盘空间不足引起的奇葩问题/">硬盘空间不足引起的奇葩问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/23/AI-要来了……/">AI 要来了……</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/15/终于搞好hexo了/">终于搞好hexo了</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/14/从今天开始100天读33本书/">从今天开始100天读33本书</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/02/PHP输出缓存区数据/">PHP输出缓存区数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/12/golang的关键词iota/">golang的关键词iota</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/22/当你辞职时，你该说些什么/">当你辞职时，你该说些什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/11/上班犯困怎么办/">上班犯困怎么办</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/08/ERROR-Deployer-not-found-git/">ERROR Deployer not found: git</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Letzte Kommentare</i></div><script type="text/javascript" src="//oknixus.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">April's way.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>